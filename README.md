# ã§ã‚“ã•ã„é€šçŸ¥XML ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ„ãƒ¼ãƒ«

SAP S/4HANA æ—¥æœ¬EMCé–¢é€£ï¼ˆEMC_JP / RFFOJP_EMCï¼‰å‘ã‘ã®ã€ã§ã‚“ã•ã„ï¼ˆdensai.netï¼‰æ¨™æº–ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé€šçŸ¥XMLãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

**ğŸŒ ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆ**: https://kmh-no3.github.io/emc-notice-genkit/

## æ¦‚è¦

ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€ã§ã‚“ã•ã„ãƒãƒƒãƒˆæ¨™æº–ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ XML ver1.3 ã«æº–æ‹ ã—ãŸ `notice_ACR.ASG.DIV`ï¼ˆç™ºç”Ÿãƒ»è­²æ¸¡é€šçŸ¥ï¼‰XMLã‚’ç”Ÿæˆã—ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Œçµã—ã€å…¥åŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

- âœ… ã§ã‚“ã•ã„é€šçŸ¥XMLï¼ˆnotice_ACR.ASG.DIVï¼‰ã®ç”Ÿæˆ
- âœ… ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã«ã‚ˆã‚‹ç°¡å˜ãªãƒ‡ãƒ¼ã‚¿ä½œæˆ
- âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆæ¡æ•°ã€å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼‰
- âœ… ãƒ—ãƒªã‚»ãƒƒãƒˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ1ä»¶/è¤‡æ•°ä»¶ï¼‰
- âœ… XMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- âœ… XMLãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆUTF-8ï¼‰
- âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®è‡ªå‹•ä¿å­˜
- âœ… ä¾é ¼äººRef.No.ã®è‡ªå‹•ç”Ÿæˆï¼ˆBUKRS + BELNR + GJAHRï¼‰

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 16 (App Router)
- **è¨€èª**: TypeScript
- **UI**: shadcn/ui + Tailwind CSS
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: zod
- **XMLç”Ÿæˆ**: xmlbuilder2
- **ãƒ†ã‚¹ãƒˆ**: Vitest

## ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

### å‰ææ¡ä»¶

- Node.js 20.x ä»¥ä¸Š
- npm

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/YOUR_USERNAME/emc-notice-genkit.git
cd emc-notice-genkit

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ãã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
npm test
```

### ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `out` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ï¼ˆæ¨å¥¨ï¼‰

åˆã‚ã¦ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ã€Œã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã€ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š

- **æœ€å°å¿…é ˆ1ä»¶ã‚µãƒ³ãƒ—ãƒ«**: æœ€å°é™ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å«ã‚€1æ˜ç´°ã®ã‚µãƒ³ãƒ—ãƒ«
- **è¤‡æ•°æ˜ç´°ã‚µãƒ³ãƒ—ãƒ«ï¼ˆ3ä»¶ï¼‰**: 3æ˜ç´°ã‚’å«ã‚€ã‚µãƒ³ãƒ—ãƒ«ï¼ˆåˆè¨ˆå€¤è¨ˆç®—ã®ç¢ºèªç”¨ï¼‰

### 2. ãƒ‡ãƒ¼ã‚¿å…¥åŠ›

#### ãƒ˜ãƒƒãƒ€æƒ…å ±
- **é€šçŸ¥æ—¥**: YYYYMMDDå½¢å¼ï¼ˆä¾‹: 20260125ï¼‰
- **é€šçŸ¥å…ˆæƒ…å ±**: åˆ©ç”¨è€…ç•ªå·ã€éŠ€è¡Œ/æ”¯åº—/å£åº§æƒ…å ±

#### æ˜ç´°ãƒ‡ãƒ¼ã‚¿
å„æ˜ç´°ã«ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š
- **é€šçŸ¥ç¨®åˆ¥**: 01ã€œ08ï¼ˆ01:ç™ºç”Ÿè¨˜éŒ²ã€02:è­²æ¸¡è¨˜éŒ² ç­‰ï¼‰
- **ç¾©å‹™è€…æƒ…å ±**: éŠ€è¡Œ/æ”¯åº—/å£åº§æƒ…å ±
- **æ¨©åˆ©è€…æƒ…å ±**: éŠ€è¡Œ/æ”¯åº—/å£åº§æƒ…å ±
- **å‚µæ¨©é‡‘é¡**: 1ã€œ10æ¡ã®æ•°å­—
- **æ”¯æ‰•æœŸæ—¥**: YYYYMMDDå½¢å¼
- **è¨˜éŒ²ç•ªå·**: æœ€å¤§20æ–‡å­—
- **é›»å­è¨˜éŒ²å¹´æœˆæ—¥**: YYYYMMDDå½¢å¼

#### ä¼ç¥¨ç‰¹å®šè£œåŠ©ï¼ˆä»»æ„ï¼‰
SAPä¼ç¥¨ã¨ã®ç´ä»˜ã‘ã«ä½¿ç”¨ï¼š
- **BUKRS**: ä¼šç¤¾ã‚³ãƒ¼ãƒ‰ï¼ˆ4æ¡ï¼‰
- **BELNR**: ä¼ç¥¨ç•ªå·ï¼ˆ1ã€œ10æ¡ã€è‡ªå‹•ã§10æ¡ã«å·¦0åŸ‹ã‚ï¼‰
- **GJAHR**: ä¼šè¨ˆå¹´åº¦ï¼ˆ4æ¡ï¼‰

ã“ã‚Œã‚‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€**ä¾é ¼äººRef.No.**ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ï¼ˆ18æ¡ï¼‰ã€‚

### 3. XMLç”Ÿæˆ

ã€ŒXMLç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å…¥åŠ›å†…å®¹ãŒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã€XMLãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

### 4. XMLãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ã€ŒXMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã€ŒXMLã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚`notice_ACR.ASG.DIV.xml` ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚

## SAPæŠ•å…¥æ‰‹é †

1. SAP S/4HANAã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ `EMC_JP`ï¼ˆãƒ¬ãƒãƒ¼ãƒˆ: RFFOJP_EMCï¼‰ã‚’èµ·å‹•
3. ã€Œå—ä¿¡DMEãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ–ãƒ­ãƒƒã‚¯ã§ **PCã‹ã‚‰èª­ã¿è¾¼ã¿** ã‚’é¸æŠ
4. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸXMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
5. å®Ÿè¡Œã—ã¦ãƒ­ã‚°ã‚’ç¢ºèª
6. FIä¼ç¥¨ï¼ˆFB03ç­‰ï¼‰ã§ `BSEG-SGTXT` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒ `kiroku_no` ã«æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ãƒ‡ãƒ¼ã‚¿ä»•æ§˜

### è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯è‡ªå‹•çš„ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚Œã¾ã™ï¼š

- **å£åº§ç•ªå·**: 7æ¡ã«å·¦0åŸ‹ã‚ï¼ˆä¾‹: `1` â†’ `0000001`ï¼‰
- **ä¼ç¥¨ç•ªå·**: 10æ¡ã«å·¦0åŸ‹ã‚ï¼ˆä¾‹: `123456` â†’ `0000123456`ï¼‰
- **æ˜ç´°ä»¶æ•°ï¼ˆsum_numï¼‰**: 6æ¡ã«å·¦0åŸ‹ã‚
- **åˆè¨ˆé‡‘é¡ï¼ˆsum_amntï¼‰**: 12æ¡ã«å·¦0åŸ‹ã‚

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¦å‰‡

- **æ—¥ä»˜**: YYYYMMDDå½¢å¼ã®8æ¡æ•°å­—
- **éŠ€è¡Œã‚³ãƒ¼ãƒ‰**: 4æ¡æ•°å­—
- **æ”¯åº—ã‚³ãƒ¼ãƒ‰**: 3æ¡æ•°å­—
- **å£åº§ç•ªå·**: 1ã€œ7æ¡æ•°å­—
- **é‡‘é¡**: 1ã€œ10æ¡æ•°å­—
- **è¨˜éŒ²ç•ªå·**: æœ€å¤§20æ–‡å­—
- **ä¾é ¼äººRef.No.**: æœ€å¤§40æ–‡å­—

## æ³¨æ„äº‹é …

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å®Œçµã—ã€ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã›ã‚“
- å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã¾ã™
- **å®Ÿéš›ã®é¡§å®¢æƒ…å ±ã‚„æ©Ÿå¯†æƒ…å ±ã‚’å…¥åŠ›ã—ãªã„ã§ãã ã•ã„**
- ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

### åˆ¶é™äº‹é …

- å¯¾å¿œæ¥­å‹™è­˜åˆ¥ID: `notice_ACR.ASG.DIV`ï¼ˆç™ºç”Ÿãƒ»è­²æ¸¡é€šçŸ¥ï¼‰ã®ã¿
- æ–‡å­—ã‚³ãƒ¼ãƒ‰: UTF-8ã®ã¿å¯¾å¿œï¼ˆShift_JISã¯å°†æ¥æ‹¡å¼µäºˆå®šï¼‰
- SAPã¸ã®è‡ªå‹•æŠ•å…¥æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆæ‰‹å‹•ã§EMC_JPã«æŠ•å…¥ã—ã¦ãã ã•ã„ï¼‰

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## å‚è€ƒè³‡æ–™

- [ã§ã‚“ã•ã„æ¨™æº–ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ XML ver1.3 ä»•æ§˜æ›¸ï¼ˆPDFï¼‰](https://www.densai.net/pdf/hyoujyunformat_XML_ver1.3_120717.pdf)
- SAP S/4HANA æ—¥æœ¬EMCé–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

```bash
# node_modulesã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
rm -rf node_modules package-lock.json
npm install
```

### ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
npm test -- --clearCache
npm test
```

### GitHub Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œãªã„

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã® Settings > Pages ã‚’é–‹ã
2. Source ã‚’ã€ŒGitHub Actionsã€ã«è¨­å®š
3. `next.config.ts` ã® `basePath` ãŒãƒªãƒã‚¸ãƒˆãƒªåã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèª

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
emc-notice-genkit/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx           # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â””â”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/               # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ HeaderForm.tsx
â”‚   â”œâ”€â”€ DataItemForm.tsx
â”‚   â”œâ”€â”€ PartyForm.tsx
â”‚   â”œâ”€â”€ XmlPreview.tsx
â”‚   â””â”€â”€ PresetSelector.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ densai/           # ã§ã‚“ã•ã„é–¢é€£ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ schema.ts     # zodã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚   â”‚   â”œâ”€â”€ format.ts     # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
â”‚   â”‚   â”œâ”€â”€ validate.ts   # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ generate.ts   # XMLç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ presets.ts    # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ storage.ts        # localStorageæ“ä½œ
â”‚   â””â”€â”€ utils.ts          # shadcn/uiç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ __tests__/            # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â””â”€â”€ .github/workflows/    # GitHub Actions
```

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã€`lib/densai/presets.ts` ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

## è²¢çŒ®

ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½è¦æœ›ã¯ã€GitHubã®Issuesã§å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚

## ã‚µãƒãƒ¼ãƒˆ

è³ªå•ã‚„å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®Issuesã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚
